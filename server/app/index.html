<!doctype html>
<html lang="en">
<head>
  <link rel="stylesheet" href="static/website.css">
  <link rel="icon" type="image/png" href="static/assets/crypticlogo.png">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cryptic</title>
  <meta name="description" content="Landing page for the Cryptic signaling server." />
</head>
<body>
  <main>
    <a href="https://github.com/StraReal/Cryptic" class="tag">GitHub</a>
    <a href="https://discord.gg/tuX9hkvFC2" class="tag">Discord</a>
    <h1>Hello, visitor!</h1>
    <p>This is the domain I use for my signaling server.</p>
    <p>
      This is part of the project at
      <a href="https://github.com/StraReal/Cryptic" target="_blank" rel="noopener">https://github.com/StraReal/Cryptic</a>,
      you should check it out, I swear it's cool!
    </p>
    <p>
      What it aims to do is create actually private chatting, but I definitely need help for it since there is no team behind it, just me.
    </p>

    <div id="interactive-section" style="margin-top: 20px; background: var(--panel); padding: 20px; border-radius: 15px;">
      <h2>How connecting with UDP Hole punching works</h2>

      <div id="main-text" style="color: var(--text); margin-bottom: 15px;">
        Step 1: The client creates a room, contacting the signaling server and telling it its IP and port.
      </div>

      <div id="step-controls" style="display: flex; justify-content: space-between;">
        <button id="prev-btn" style="background: var(--accent); color: var(--text); border: none; padding: 6px 12px; border-radius: 8px; cursor: pointer;">Prev</button>
        <button id="next-btn" style="background: var(--accent); color: var(--text); border: none; padding: 6px 12px; border-radius: 8px; cursor: pointer;">Next</button>
      </div>
    </div>
        <div id="drawing-area" style="margin-top: 30px; background: white; height: 200px; border-radius: 15px; border: 1px solid #ccc; position: relative;">
    </div>

    <footer>
      <span>Made to protect — self‑hosted via Cloudflare Tunnel</span>
    </footer>
  </main>

  <script>
    // Passages
    const steps = [
      "Step 1: The client creates a room, contacting the signaling server and telling it its IP and port.",
      "Step 2: The second client asks the signaling server to let it join said room.",
      "Step 3: The signaling server tells peer A peer B's IP:port and viceversa.",
      "Step 4: Peer A and peer B start sending each other packets until one gets through, establishing a connection (punching a hole).",
      "Step 5: A connection is now opened and the two can now chat between them without their messages passing through any server."
    ];
    const steps_rect = [
  // Step 1
  `
    <img src="static/assets/PClogo.png" alt="PC" style="position:absolute; top:50px; left:10%; height:50%; width:auto;">
    <img src="static/assets/serverlogo.png" alt="Server" style="position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); height:40%; width:auto;">
    <div class="dashed-line"
    style="--line-duration: 1s; --line-left: 15%;"></div>

    <div class="moving-text" style="--start: 16%; --end: 40%; --top: 30%">
    CREATE ABC123<br> 93.184.216.34:4999❯

    </div>
  `,
  // Step 2
  `
    <img src="static/assets/PClogo.png" alt="PC" style="position:absolute; top:25%; left:10%; height:50%; width:auto;">
    <img src="static/assets/serverlogo.png" alt="Server" style="position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); height:40%; width:auto;">

    <div class="dashed-line"
    style="--line-left: 15%;"></div>

    <img src="static/assets/PClogo.png" alt="PC" style="position:absolute; top:25%; right:10%; height:50%; width:auto;">

    <div class="dashed-line"
    style="--line-duration: 1s; --line-right: 15%;"></div>

    <div style="position:absolute; color: black; top:20%; left:50%; transform:translate(-50%,-50%);
              font-size:70%; font-weight:bold;">
    ABC123:<br> 93.184.216.34:4999</div>

    <div class="moving-text" style="--start: 16%; --end: 40%; --top: 30%; --anim: moveTextR;">
    &nbsp;&nbsp;JOIN ABC123<br> ❮192.168.1.1:9999
  `,
  // Step 3
  `
    <img src="static/assets/PClogo.png" alt="PC" style="position:absolute; top:25%; left:10%; height:50%; width:auto;">
    <img src="static/assets/serverlogo.png" alt="Server" style="position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); height:40%; width:auto;">
    <div style="position:absolute; top:50%; left:15%; width:19%; border-top: 6px dashed black; transform: translateY(-50%); margin: 0 10%;"></div>
    <img src="static/assets/PClogo.png" alt="PC" style="position:absolute; top:25%; right:10%; height:50%; width:auto;">
    <div style="position:absolute; top:50%; right:15%; width:19%; border-top: 6px dashed black; transform: translateY(-50%); margin: 0 10%;"></div>

    <div class="moving-text" style="--start: 40%; --end: 16%; --top: 30%; --anim: moveTextR;">
    PEER 93.184.216.34:4999❯</div>
    <div class="moving-text" style="--start: 40%; --end: 16%; --top: 30%;">
    ❮PEER 192.168.1.1:9999
  `,
  // Step 4
  `
    <img src="static/assets/PClogo.png" alt="PC" style="position:absolute; top:25%; left:10%; height:50%; width:auto;">
    <img src="static/assets/PClogo.png" alt="PC" style="position:absolute; top:25%; right:10%; height:50%; width:auto;">

    <div style="position:absolute; top:50%; left:15%; right:15%; border-top: 6px dashed black; transform: translateY(-50%); margin: 0 10%;"></div>
    <div class="moving-text" style="--start: 16%; --end: 80%; --top: 38%;">
    HELLO❯</div>
    <div class="moving-text" style="--start: 16%; --end: 80%; --top: 38%; --delay: 0.3s;">
    HELLO❯</div>
    <div class="moving-text" style="--start: 16%; --end: 80%; --top: 38%; --delay: 0.6s;">
    HELLO❯</div>
    <div class="moving-text" style="--start: 16%; --end: 80%; --top: 38%; --delay: 0.9s;">
    HELLO❯</div>

    <div class="moving-text" style="--start: 16%; --end: 80%; --top: 38%; --anim: moveTextR;">
    ❮HELLO</div>
    <div class="moving-text" style="--start: 16%; --end: 80%; --top: 38%; --delay: 0.4s; --anim: moveTextR;">
    ❮HELLO</div>
    <div class="moving-text" style="--start: 16%; --end: 80%; --top: 38%; --delay: 0.7s; --anim: moveTextR;">
    ❮HELLO</div>
    <div class="moving-text" style="--start: 16%; --end: 80%; --top: 38%; --delay: 1s; --anim: moveTextR;">
    ❮HELLO
  `,
  // Step 5
  `
    <img src="static/assets/PClogo.png" alt="PC" style="position:absolute; top:25%; left:10%; height:50%; width:auto;">
    <img src="static/assets/PClogo.png" alt="PC" style="position:absolute; top:25%; right:10%; height:50%; width:auto;">
    <div style="position:absolute; top:50%; left:15%; right:15%; border-top: 6px dashed black; transform: translateY(-50%); margin: 0 10%;"></div>
    <div class="moving-text" style="--start: 16%; --end: 80%; --top: 38%;">
    Hi there!❯</div>
    <div class="moving-text" style="--start: 16%; --end: 80%; --top: 38%; --delay: 1.8s; --anim: moveTextR;">
    ❮Hello!
  `
];

    let currentStep = 0;

    const mainText = document.getElementById('main-text');
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');
    const drawingArea = document.getElementById('drawing-area');

    function updateStep() {
      mainText.textContent = steps[currentStep];
      prevBtn.disabled = currentStep === 0;
      nextBtn.disabled = currentStep === steps.length - 1;
      drawingArea.innerHTML = steps_rect[currentStep];
    }

    prevBtn.addEventListener('click', () => {
      if(currentStep > 0) currentStep--;
      updateStep();
    });

    nextBtn.addEventListener('click', () => {
      if(currentStep < steps.length - 1) currentStep++;
      updateStep();
    });

    // Initialize visualization
    updateStep();
  </script>

</body>
</html>
